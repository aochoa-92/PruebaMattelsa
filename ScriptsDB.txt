CREATE DATABASE PruebaParqueaderoDB;
go
CREATE TABLE TB_TIPO_PERSONA(
	ID_TIPO_PERSONA INT IDENTITY(1,1) NOT NULL PRIMARY KEY ,
	DESCRIPCION VARCHAR(50) NOT NULL
)
go
CREATE TABLE TB_PERSONAS(	
	CEDULA VARCHAR(10) NOT NULL PRIMARY KEY , 
	NOMBRES VARCHAR (100) NOT NULL,
	APELLIDOS VARCHAR (100) NOT NULL, 
	CELULAR VARCHAR(10) NOT NULL,
 	EMAIL VARCHAR (100) NOT NULL,
	ID_TIPO_PERSONA INT NOT NULL,
	FOREIGN KEY (ID_TIPO_PERSONA) REFERENCES TB_TIPO_PERSONA(ID_TIPO_PERSONA)
)
go
CREATE TABLE TB_TIPOS_VEHICULO (
	ID_TIPO_VEHICULO INT IDENTITY(1,1) NOT NULL PRIMARY KEY ,
	DESCRIPCION VARCHAR(10) NOT NULL
)
go
CREATE TABLE TB_VEHICULOS (
	ID_VEHICULO INT IDENTITY(1,1) NOT NULL PRIMARY KEY, 
	ID_TIPO_VEHICULO INT NOT NULL,
	CILINDRAJE VARCHAR(6) NULL,
	TIEMPOS INT NULL, 
	PLACA VARCHAR(10) NOT NULL,
	MODELO INT NULL,
	NUMERO_PUERTAS INT NULL,
	FOTOGRAFIA IMAGE NULL, 
	FOREIGN KEY (ID_TIPO_VEHICULO) REFERENCES TB_TIPOS_VEHICULO(ID_TIPO_VEHICULO)
)
go
CREATE TABLE TB_VEHICULO_X_PERSONA (
	CEDULA VARCHAR(10) NOT NULL,
	ID_VEHICULO INT NOT NULL,
	FOREIGN KEY (CEDULA) REFERENCES TB_PERSONAS(CEDULA),
	FOREIGN KEY (ID_VEHICULO) REFERENCES TB_VEHICULOS(ID_VEHICULO)
)
go
CREATE TABLE TB_INGRESOS (
	ID_INGRESO INT IDENTITY(1,1) NOT NULL PRIMARY KEY, 
	FECHA_HORA DATETIME NOT NULL, 
	NUMERO_CELDA INT NULL,
	ID_VEHICULO INT NOT NULL,
	FOREIGN KEY (ID_VEHICULO) REFERENCES TB_VEHICULOS(ID_VEHICULO)
)
go
INSERT INTO TB_TIPO_PERSONA (DESCRIPCION) VALUES ('EMPLEADO')
go
INSERT INTO TB_TIPO_PERSONA (DESCRIPCION) VALUES ('VISITANTE')
go
INSERT INTO TB_TIPOS_VEHICULO(DESCRIPCION) VALUES ('CARRO')
go
INSERT INTO TB_TIPOS_VEHICULO(DESCRIPCION) VALUES ('MOTO')
go
INSERT INTO TB_TIPOS_VEHICULO(DESCRIPCION) VALUES ('BICICLETA')
